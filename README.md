# SimpleBlog

–ü—Ä–æ—Å—Ç–æ–µ –±–ª–æ–≥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å PostgreSQL, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üèóÔ∏è **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (domain, storage, transport)
- üóÑÔ∏è **PostgreSQL**: –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —É—Ä–æ–≤–Ω–µ–π –∏–∑–æ–ª—è—Ü–∏–∏
- üîÑ **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: unit –∏ acceptance —Ç–µ—Å—Ç—ã
- üê≥ **Docker**: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å Docker Compose
- üìö **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger/OpenAPI

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ —Å Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd course-project-vanek-goriachev

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
./run_dev.sh
```

### 2. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\Activate.ps1

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt -r requirements-dev.txt

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
cp env.example .env

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL (—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞)
# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
uvicorn app.cmd.public_api:fastapi_app --reload
```

## API Endpoints

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000`

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints:
- `GET /health` ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `GET /docs` ‚Üí Swagger UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `GET /redoc` ‚Üí ReDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### Posts API:
- `GET /posts` ‚Üí –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤
- `POST /posts` ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
- `GET /posts/{id}` ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–∞
- `PUT /posts/{id}` ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞
- `DELETE /posts/{id}` ‚Üí –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞

### Post Tags API:
- `GET /post-tags` ‚Üí –°–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤
- `POST /post-tags` ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞
- `GET /post-tags/{id}` ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–≥–∞
- `PUT /post-tags/{id}` ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞
- `DELETE /post-tags/{id}` ‚Üí –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–≥–∞

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
```bash
./run_tests.sh
```

### Unit —Ç–µ—Å—Ç—ã
```bash
python -m pytest tests/unit/ -v
```

### Acceptance —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ API)
```bash
python -m pytest tests/acceptance/ -v
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `env.example` –≤ `.env` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL
DB_HOST=postgres
DB_PORT=5432
DB_NAME=simpleblog
DB_USER=simpleblog_user
DB_PASSWORD=simpleblog_password
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
app/
‚îú‚îÄ‚îÄ domain/           # –î–æ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ models/       # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ services/     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ interfaces/   # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îú‚îÄ‚îÄ storage/          # –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ postgres/     # PostgreSQL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚îú‚îÄ‚îÄ transport/        # –°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ rest/         # REST API
‚îî‚îÄ‚îÄ cmd/              # –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –†–∏—Ç—É–∞–ª –ø–µ—Ä–µ–¥ PR
```bash
ruff --fix .
black .
isort .
pytest -q
pre-commit run --all-files
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤
```
tests/
‚îú‚îÄ‚îÄ unit/             # Unit —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ acceptance/       # Acceptance —Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ README.md         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
```

## Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t simpleblog .

# –ó–∞–ø—É—Å–∫ —Å Docker Compose
docker-compose --profile dev up --build
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–°–º. `SECURITY.md` –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —É—á–µ–±–Ω–æ–≥–æ –∫—É—Ä—Å–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
