# ADR-003: Конфигурация через переменные окружения в Docker
Дата: 2025-01-15
Статус: Accepted

## Context
Жестко закодированные настройки усложняют развертывание в разных окружениях и создают security-риски хранения секретов в коде.

## Decision
Все настройки вынесены в переменные окружения с:
- Валидацией при старте приложения
- Значениями по умолчанию для development
- Чувствительными данными (секреты) только через env vars
- Конфигурацией Docker через `environment` в `docker-compose.yml`

## Alternatives
1. **Конфигурационные файлы** - риск коммита секретов в репозиторий
2. **External config servers** - избыточно для текущего масштаба
3. **Аргументы командной строки** - неудобно для Docker-деплоя

## Consequences
### Плюсы
- Безопасное хранение секретов
- Упрощение деплоя в разные окружения
- Соответствие 12-factor app principles

### Минусы
- Необходимость документации переменных
- Валидация на этапе выполнения (не компиляции)

## Security Impact
- Исключение секретов из кода и репозитория
- Разделение конфигов по окружениям
- Минимизация риска unintended configs в production

## Rollout Plan
1. Вынос всех настроек в env vars
2. Создание валидатора конфигурации
3. Обновление docker-compose и документации

## Links
- NFR-04 (Security)
- R4 из Threat Model (Configuration Security)
- Реализация: `compose.yaml`
